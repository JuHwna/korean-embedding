# 한국어 전처리
## 3.1. 데이터 확보
 - 임베딩을 구축하기 위해서 말뭉치 필요
 - 임베딩 학습용 말뭉치는 직접 만들 수도 있고 웹 문서를 스크래핑을 해서 모을 수 있음

### 3.1.1. 한국어 위키백과
 - 한국어 말뭉치로서 한국어 위키백과만큼 방대한 데이터가 없음
 - raw 데이터에서 전처리를 해야 한다.
   - 특수문자라든가, 목차, 이메일 주소 등 불필요한 문자열이 많이 끼어 있음
   - tokenize 함수를 사용자 정의 함수로 만들어 사용
 - wikiextractor : 위키백과 정제 라이브러리(사용법이 간단함)
 
### 3.1.2. KorQuAD
 - 한국어 기계 독해를 위한 데이터셋
 - LG CNS가 구축해 2018년 공개했으며 학습/데브/데스트셋을 모두 폼함해 7만 79건
 
### 3.1.3. 네이버 영화 리뷰 말뭉치
 - 네이버 영화 리뷰 말뭉치 : 네이버 영화 페이지와 영화 리뷰들을 평점과 함께 수록한 한국어 말뭉치
 - 박은정 님께서 구축하고 정제해 공개한 말뭉치
 - 감성분석이나 문서 분류 태스크 수행에 제격인 데이터셋
 - 레코드 하나는 문서(리뷰)에 해당
 - 문서 ID, 문서 내용, 레이블로 구서오대 있으며 각 열은 탭 문자로 구분
 - 데이터의 크기 20만 개(절반이 긍정, 나머지 부정)
 
## 3.2. 지도 학습 기반 형태소 분석
 - 품질 좋은 임베딩을 만들기 위해서는 문장이나 단어의 경계를 컴퓨터에 알려줘야 한다.
   - 안 그러면 어휘 집합에 속한 단어 수가 기하급수적으로 늘어나서 연상의 비효율이 발생
   - 한국어는 조사와 어미가 발달한 교착어이어서 섬세히 해줘야 함
 - 새로운 활용형이 나타날 때마다 어휘 집합을 계속 늘려야 함
 - **은전한닢**이라는 오픈소스 형태소 분석기로 분석하면 각 형태소를 단어로 취급함
 - 교착어인 한국어는 한정된 종류의 조사와 어미를 자주 이용하기 때문에 각각에 대응하는 명사, 용언(형용사, 동사) 어간만 어휘 집합에 추가하면 취급 단어개수를 줄일 수 있음
 - 형태소 분석기만 잘 활용해도 자연어 처리의 효율성을 높일 수 있다는 이야기

#### 지도학습 기반의 형태소 분석 방법
 - 지도 학습 : 정답이 있는 데이터의 패턴을 학습해 모델이 정답을 맞도록 하는 기법
 - 형태소 분석기 : 언어학 전문가들이 태깅한 형태소 분석 말뭉치로부터 학습된 지도 학습 기반 모델
    - 태깅 : 모델 입력과 출력 쌍을 만드는 작업

### 3.2.1. KoNLPy 사용법
 - **KoNLPy** : 은전한닢, 꼬꼬마, 한나눔, Okt, 코모란 등 5개 오픈소스 형태소 분석기를 파이썬 환경에서 사용할 수 있도록 인터페이스를 통일한 한국어 자연어 처리 패키지
   - C++, 자바 등 각기 다른 언어로 개발된 오픈소스들을 한군데에 묶어 쉽게 사용할 수 있도록 도움.
 ~~~
 from konlpy.tag import Mecab, Okt, Komoran, Hannanum, Kkma
 ~~~
 
### 3.2.2. KoNLPy 내 분석기별 성능 차이 분석
 - 로딩시간과 실행시간 따지면서 형태소 분석 품질을 보고 결정하자(상황에 따라 다르니)

### 3.2.3. Khaiii 사용법
 - Khaiii : 카카오가 2018년 말 공개한 오픈소스 한국어 형태소 분석기
    - 국립국어원이 구축한 세종코퍼스를 이용해 CNN 모델을 적용해 학습함
    - 입력 문장을 문자 단위로 읽어 들인 뒤 convolution filter가 이 문자들을 슬라이딩해 가면서 정보를 추출함
    - 네트워크의 말단 레이어에서는 이렇게 모은 정보들을 종합해 형태소의 경계와 품사 태그를 예측함.
    - 모델을 C++로 구현해 GPU 없이도 형태소 분석이 가능하며 실행 속도 역시 빠르다고 함.
    ![khaiii 아키텍처](https://user-images.githubusercontent.com/49123169/73122275-4c09b300-3fc6-11ea-9403-78a99976ea25.PNG)
   
    - 여기에는 나오지 않지만 khaiii 자체가 linux 기반으로 만들어졌기 때문에 windows 환경에서는 돌리기 힘들다고 들었음
       - 그래서 설치하려면 ubuntu를 통해 설치한 후, python도 설치하여 돌려야 한다(설치하려다가 우분투 설치가 너무 많아서 설치 못했음...)

### 3.2.4. 은전한닢에 사용자 사전 추가하기
 - 형태소 분석기에서 가장 신경 써야 하는 점 : 중요 토큰들을 어떻게 처리해야 할지
 - 사용자 사전에 추가하기 위해선 preprocessmecab-user-dic.csv에 추가해주면 된다고 한다.
 
## 3.3. 비지도 학습 기반 형태소 분석
 - 비지도 학습 기반의 형태소 분석 : 데이터의 패턴을 모델 스스로 학습하게 함으로써 형태소를 분석하는 방법
     - 데이터에 자주 등장하는 단어들을 형태소로 인식
